今更ながらDockerの勉強をしています。
色々わからないところが多く、詰まったりしたところが多かったので自分はこのようにしたというのを書きます。
他にやり方があるよとかあれば、教えていただけると嬉しいです。

一応Dockerとか関係なく、
ローカルでさえ設定ができませえんって人が読めるくらいのレベルで書きたいです。

コードは全てgithubにおいておきます。
記事では関係ないところは飛ばしていたりします。
疑問があればご確認ください.
[この記事のコード](https://github.com/g-hyoga/test-golang-on-docker)

# この記事の目標

コマンドを一つ叩くと、
(データがなければ)初期化されたmysqlコンテナ、goのwebコンテナが立ち上がり、
今回はmysqlに入ったデータを取得し、jsonで返すくらいにしておきます。

この際、もちろんですが、データは永続化されていて、
ついでにmysqlのログがローカルで見れるようにします。

docker-composeが動く環境にだけしておいてください。


# 下準備:mysqlコンテナ

mysqlコンテナの下準備をします。
具体的には,

 * 文字コードの変更
 * logをローカルで見れるようにする
 * 初期データを作る

## 文字コードの変更

公式のmysql imageを使いますが、
そのままだと日本語を入れると文字化けしてしまいます.

解決策は調べてみた感じで複数あるようです。

 * mysqlの設定ファイルをVOLUMEを使って書き換える(これを選択)
 * mysqlの公式のコマンドを使う(試してない)

### mysqlの設定ファイルをVOLUMEを使って書き換える

僕はこれを使いました。
query logを見たくなった時とかにどうせ書き換える必要があるし

という訳で設定ファイルを用意します.
mysql系の設定ファイルはmysqlというでディレクトリを作ってそこに入れることにします。

##### ./mysql/my.cnf
```
...
[client]

...

default-character-set=utf8

...

[mysqld]

...

character-set-server=utf8

```

文字コードをutf8に変更しておきましょう。
寿司ビール問題とかはとりあえず無視でします。

### mysqlの公式のコマンドを使う(試してない)

見にくくなるの[こちら]()に書きました.



